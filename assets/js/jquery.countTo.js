(function ($){$.fn.countTo=function (options){options=options ||{};return $(this).each(function (){// set options for current elementvar settings=$.extend({}, $.fn.countTo.defaults,{from: $(this).data('from'),to: $(this).data('to'),speed: $(this).data('speed'),refreshInterval: $(this).data('refresh-interval'),decimals: $(this).data('decimals')}, options);// how many times to update the value, and how much to increment the value on each updatevar loops=Math.ceil(settings.speed / settings.refreshInterval),increment=(settings.to - settings.from) / loops;// references & variables that will change with each updatevar self=this,$self=$(this),loopCount=0,value=settings.from,data=$self.data('countTo') ||{};$self.data('countTo', data);// if an existing interval can be found, clear it firstif (data.interval){clearInterval(data.interval);}data.interval=setInterval(updateTimer, settings.refreshInterval);// initialize the element with the starting valuerender(value);function updateTimer(){value +=increment;loopCount++;render(value);if (typeof(settings.onUpdate)=='function'){settings.onUpdate.call(self, value);}if (loopCount >=loops){// remove the interval$self.removeData('countTo');clearInterval(data.interval);value=settings.to;if (typeof(settings.onComplete)=='function'){settings.onComplete.call(self, value);}}}function render(value){var formattedValue=settings.formatter.call(self, value, settings);$self.text(formattedValue);}});};$.fn.countTo.defaults={from: 0, // the number the element should start atto: 0, // the number the element should end atspeed: 1000, // how long it should take to count between the target numbersrefreshInterval: 100, // how often the element should be updateddecimals: 0, // the number of decimal places to showformatter: formatter, // handler for formatting the value before renderingonUpdate: null, // callback method for every time the element is updatedonComplete: null // callback method for when the element finishes updating};function formatter(value, settings){return value.toFixed(settings.decimals);}}(jQuery));